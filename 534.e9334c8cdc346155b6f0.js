"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[534],{dSSS:(e,l,a)=>{a.r(l),a.d(l,{default:()=>S});var t=a("q1tI"),r=a("raqg"),i=a("vvQw"),n=a("LboF"),c=a.n(n),u=a("5Hnr"),o=a.n(u),v=a("shRe"),m=a.n(v),s=a("3c4z"),b=a.n(s),d=a("3mzb"),p=a.n(d),w=a("Hd6Y"),x=a.n(w),h=a("E9vQ"),f={};f.styleTagTransform=x(),f.setAttributes=b(),f.insert=m().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=p(),c()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals,a("SOLs");var g=a("fDUD"),y=a("KJq9"),E=a("wTN4");const N={0:"台北市",1:"新北市",2:"桃園市",3:"新竹縣",4:"新竹市",5:"基隆市",6:"宜蘭市"},q={0:{100:"中正區",103:"大同區",104:"中山區",105:"松山區",106:"大安區",108:"萬華區",110:"信義區",111:"士林區",112:"北投區",114:"內湖區",115:"南港區",116:"文山區"},1:{207:"萬里區",208:"金山區",220:"板橋區",221:"汐止區",222:"深坑區",223:"石碇區",224:"瑞芳區",226:"平溪區",227:"雙溪區",228:"貢寮區",231:"新店區",232:"坪林區",233:"烏來區",234:"永和區",235:"中和區",236:"土城區",237:"三峽區",238:"樹林區",239:"鶯歌區",241:"三重區",242:"新莊區",243:"泰山區",244:"林口區",247:"蘆洲區",248:"五股區",249:"八里區",251:"淡水區",252:"三芝區",253:"石門區"},2:{320:"中壢區",324:"平鎮區",325:"龍潭區",326:"楊梅區",327:"新屋區",328:"觀音區",330:"桃園區",333:"龜山區",334:"八德區",335:"大溪區",336:"復興區",337:"大園區",338:"蘆竹區"},3:{302:"竹北市",303:"湖口鄉",304:"新豐鄉",305:"新埔鎮",306:"關西鎮",307:"芎林鄉",308:"寶山鄉",310:"竹東鎮",311:"五峰鄉",312:"橫山鄉",313:"尖石鄉",314:"北埔鄉",315:"峨眉鄉"},4:{300:"香山區",30002:"東區",30003:"北區"},5:{200:"仁愛區",201:"信義區",202:"中正區",203:"中山區",204:"安樂區",205:"暖暖區",206:"七堵區"},6:{260:"宜蘭市",261:"頭城鎮",262:"礁溪鄉",263:"壯圍鄉",264:"員山鄉",265:"羅東鎮",266:"三星鄉",267:"大同鄉",268:"五結鄉",269:"冬山鄉",270:"蘇澳鎮",272:"南澳鄉",290:"釣魚臺"}},D={email:{label:"email",type:"email",required:!0},tel:{label:"手機",type:"tel",required:!0,pattern:"[0-9]{4}-[0-9]{3}-[0-9]{3}",patternDemo:" Format: 0900-001-001"},city:{label:"居住縣市",type:"select",selectList:[{label:"台北市",value:0},{label:"新北市",value:1},{label:"桃園市",value:2},{label:"新竹縣",value:3},{label:"新竹市",value:4},{label:"基隆市",value:5},{label:"宜蘭市",value:6}],required:!0},district:{label:"行政區",type:"selectDistrict",selectList:[[{label:"中正區",value:"100"},{label:"大同區",value:"103"},{label:"中山區",value:"104"},{label:"松山區",value:"105"},{label:"大安區",value:"106"},{label:"萬華區",value:"108"},{label:"信義區",value:"110"},{label:"士林區",value:"111"},{label:"北投區",value:"112"},{label:"內湖區",value:"114"},{label:"南港區",value:"115"},{label:"文山區",value:"116"}],[{label:"萬里區",value:"207"},{label:"金山區",value:"208"},{label:"板橋區",value:"220"},{label:"汐止區",value:"221"},{label:"深坑區",value:"222"},{label:"石碇區",value:"223"},{label:"瑞芳區",value:"224"},{label:"平溪區",value:"226"},{label:"雙溪區",value:"227"},{label:"貢寮區",value:"228"},{label:"新店區",value:"231"},{label:"坪林區",value:"232"},{label:"烏來區",value:"233"},{label:"永和區",value:"234"},{label:"中和區",value:"235"},{label:"土城區",value:"236"},{label:"三峽區",value:"237"},{label:"樹林區",value:"238"},{label:"鶯歌區",value:"239"},{label:"三重區",value:"241"},{label:"新莊區",value:"242"},{label:"泰山區",value:"243"},{label:"林口區",value:"244"},{label:"蘆洲區",value:"247"},{label:"五股區",value:"248"},{label:"八里區",value:"249"},{label:"淡水區",value:"251"},{label:"三芝區",value:"252"},{label:"石門區",value:"253"}],[{label:"中壢區",value:"320"},{label:"平鎮區",value:"324"},{label:"龍潭區",value:"325"},{label:"楊梅區",value:"326"},{label:"新屋區",value:"327"},{label:"觀音區",value:"328"},{label:"桃園區",value:"330"},{label:"龜山區",value:"333"},{label:"八德區",value:"334"},{label:"大溪區",value:"335"},{label:"復興區",value:"336"},{label:"大園區",value:"337"},{label:"蘆竹區",value:"338"}],[{label:"竹北市",value:"302"},{label:"湖口鄉",value:"303"},{label:"新豐鄉",value:"304"},{label:"新埔鎮",value:"305"},{label:"關西鎮",value:"306"},{label:"芎林鄉",value:"307"},{label:"寶山鄉",value:"308"},{label:"竹東鎮",value:"310"},{label:"五峰鄉",value:"311"},{label:"橫山鄉",value:"312"},{label:"尖石鄉",value:"313"},{label:"北埔鄉",value:"314"},{label:"峨眉鄉",value:"315"}],[{label:"香山區",value:"300"},{label:"東區",value:"30002"},{label:"北區",value:"30003"}],[{label:"仁愛區",value:"200"},{label:"信義區",value:"201"},{label:"中正區",value:"202"},{label:"中山區",value:"203"},{label:"安樂區",value:"204"},{label:"暖暖區",value:"205"},{label:"七堵區",value:"206"}],[{label:"宜蘭市",value:"260"},{label:"頭城鎮",value:"261"},{label:"礁溪鄉",value:"262"},{label:"壯圍鄉",value:"263"},{label:"員山鄉",value:"264"},{label:"羅東鎮",value:"265"},{label:"三星鄉",value:"266"},{label:"大同鄉",value:"267"},{label:"五結鄉",value:"268"},{label:"冬山鄉",value:"269"},{label:"蘇澳鎮",value:"270"},{label:"南澳鄉",value:"272"},{label:"釣魚臺",value:"290"}]],required:!0},address:{label:"地址",type:"text",required:!0},startDate:{label:"起日",type:"date",required:!0},startTime:{label:"起時",type:"time",required:!0},endDate:{label:"迄日",type:"date",required:!0},endTime:{label:"迄時",type:"time",required:!0},elseInfo:{label:"其他",type:"textarea"}};var I=a("khL0"),k=a("DuBu");const S=function(){var e,l;const a=(0,i.I0)(),n=(0,i.v9)((e=>e.persistedControlReducer.userData)),[c,u]=(0,r.x)({});return(0,t.useEffect)((()=>{!async function(){try{const e=JSON.parse(localStorage.getItem("cart")),l=(null==e?void 0:e.cartList)||{};if(0===Object.keys(l))return;a((0,E.a)(!0));const t=Object.keys(l).map((e=>(0,y.l)("get","https://api.thecatapi.com/v1/images/"+e))),r=await Promise.all(t);a((0,E.a)(!1));const i=[];r.forEach((e=>{if(null!=e&&e.data){var a,t,r;const n={catId:null===(a=e.data)||void 0===a?void 0:a.id,name:null===(t=e.data)||void 0===t||null===(t=t.breeds)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.name,url:null===(r=e.data)||void 0===r?void 0:r.url,quantity:l[e.data.id]||1};i.push(n)}})),u((e=>{e.items=i}))}catch(e){console.log(e)}}()}),[]),null!=c&&c.items?t.createElement("main",null,t.createElement("div",{className:"cart-items-wrapper"},0===(null==c||null===(e=c.items)||void 0===e?void 0:e.length)?t.createElement("div",{className:"cart-item-wrapper"},t.createElement("div",{className:"cart-item-wrapper-content"},"購物車內無項目")):null==c||null===(l=c.items)||void 0===l?void 0:l.map((e=>t.createElement("div",{key:e.catId,className:"cart-item-wrapper"},t.createElement("div",{className:"cart-item-wrapper-content"},t.createElement("img",{src:null==e?void 0:e.url,alt:"貓咪圖片",srcSet:""})),t.createElement("div",{className:"cart-item-wrapper-content cart-item-wrapper-content-name"},null==e?void 0:e.name),t.createElement("div",{className:"cart-item-wrapper-content"},"小計：",null==e?void 0:e.quantity,"000"),t.createElement("div",{className:"cart-item-wrapper-content cart-item-wrapper-content-control"},t.createElement("div",{className:"cart-item-wrapper-content-control-remove",onClick:()=>{window.confirm("確定刪除：".concat(e.name,"?"))&&function(e){u({...c,items:c.items.filter((l=>l.catId!==e))});let l=localStorage.getItem("cart");l=JSON.parse(l);const a={};Object.keys(l.cartList).forEach((t=>{t!==e&&(a[t]=l.cartList[t])})),l.cartList=a,localStorage.setItem("cart",JSON.stringify(l))}(e.catId)}},"✖"))))),t.createElement("div",{className:"cart-item-wrapper-content cart-item-wrapper-content-total"},t.createElement("div",null,"總計："),t.createElement("div",null,"1000"))),t.createElement(g.Z,{formData:c,formConfig:D,handleChange:function(e,l){u((a=>{a[l]=e}))},handleSubmit:async function(){var e;if(!(0,I.s)(c))return window.alert("起始時間不可晚於結束時間");const l="".concat(N[Number(c.city)]).concat(q[Number(c.city)][Number(c.district)]).concat(c.address),a="".concat(c.startDate," ").concat(c.startTime),t="".concat(c.endDate," ").concat(c.endTime),r=c.items.map((e=>e.catId)),i=c.items.reduce(((e,l)=>e+1e3),0),u=await(0,y.l)("post",k.r+"/api/order",{userId:n.id,orderPhone:c.tel,orderAddress:l,startDateTime:a,endDateTime:t,totalPrice:i,status:0,catId:r});return console.log("response",u),"success"===(null==u||null===(e=u.data)||void 0===e?void 0:e.status)?window.alert("訂單成功送出\n專人處理中"):window.alert("訂單失敗\n請稍後再試")}})):t.createElement("main",null)}},E9vQ:(e,l,a)=>{a.d(l,{Z:()=>c});var t=a("J8ja"),r=a.n(t),i=a("JPst"),n=a.n(i)()(r());n.push([e.id,".cart-items-wrapper{display:flex;flex-direction:column;max-width:720px;margin:20px auto;padding:10px;border-radius:20px;box-shadow:rgba(0,0,0,.05) 0px 6px 24px 0px,rgba(0,0,0,.08) 0px 0px 0px 1px}@media(min-width: 576px){.cart-items-wrapper{padding:20px 30px}}.cart-item-wrapper{display:flex;flex-direction:row;justify-content:center;justify-content:space-between;align-items:center;margin:0 0 5px}.cart-item-wrapper img{width:90px;height:60px;border-radius:20px}@media(min-width: 576px){.cart-item-wrapper img{width:120px;height:90px}}@media(min-width: 768px){.cart-item-wrapper{margin:0 0 10px}.cart-item-wrapper img{width:180px;height:120px}}.cart-item-wrapper-content{margin:0 5px}@media(min-width: 768px){.cart-item-wrapper-content{margin:0 10px}}.cart-item-wrapper-content-name{width:100%;max-width:200px;flex-shrink:1}.cart-item-wrapper-content-control{flex-shrink:0}.cart-item-wrapper-content-control-remove{cursor:pointer}.cart-item-wrapper-content-total{display:flex;flex-direction:row;justify-content:space-between;padding:10px 0 0;border-top:1px solid #ddd;font-weight:600}",""]),n.locals={textPrimaryColor:"#17202a",mainThemeColor:"#43766c",mainThemeColorDark:"#f8fae5",mainThemeColorLight:"#b19470",mainThemeColorComplement:"#76453b"};const c=n}}]);